#alertmanager:
#  enabled: true
#nodeExporter:
#  enabled: false
#pushgateway:
#  enabled: true
#server:
#  persistentVolume:
#    enabled: false
#  retention: 1h
#  service:
#    annotations: {}
#    clusterIP: ""
#    labels: {}
#    port: 9090
#    targetPort: 9090
#    nodePort: 32636
#    type: NodePort
#  global:
#    scrape_interval: 15s
#    scrape_timeout: 15s
#    evaluation_interval: 15s
#serverFiles:
#  prometheus.yml:
#    scrape_configs:
#      - job_name: prometheus
#        static_configs:
#          - targets:
#              - localhost:9090
#      - bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token
#        job_name: kubernetes-apiservers
#        kubernetes_sd_configs:
#          - role: endpoints
#        relabel_configs:
#          - action: keep
#            regex: default;kubernetes;https
#            source_labels:
#              - __meta_kubernetes_namespace
#              - __meta_kubernetes_service_name
#              - __meta_kubernetes_endpoint_port_name
#        scheme: https
#        tls_config:
#          ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
#          insecure_skip_verify: true
#      - bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token
#        job_name: kubernetes-nodes
#        kubernetes_sd_configs:
#          - role: node
#        relabel_configs:
#          - action: labelmap
#            regex: __meta_kubernetes_node_label_(.+)
#          - replacement: kubernetes.default.svc:443
#            target_label: __address__
#          - regex: (.+)
#            replacement: /api/v1/nodes/$1/proxy/metrics
#            source_labels:
#              - __meta_kubernetes_node_name
#            target_label: __metrics_path__
#        scheme: https
#        tls_config:
#          ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
#          insecure_skip_verify: true
#      - bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token
#        job_name: kubernetes-nodes-cadvisor
#        kubernetes_sd_configs:
#          - role: node
#        relabel_configs:
#          - action: labelmap
#            regex: __meta_kubernetes_node_label_(.+)
#          - replacement: kubernetes.default.svc:443
#            target_label: __address__
#          - regex: (.+)
#            replacement: /api/v1/nodes/$1/proxy/metrics/cadvisor
#            source_labels:
#              - __meta_kubernetes_node_name
#            target_label: __metrics_path__
#        scheme: https
#        tls_config:
#          ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
#          insecure_skip_verify: true
#      - job_name: kubernetes-service-endpoints
#        kubernetes_sd_configs:
#          - role: endpoints
#        relabel_configs:
#          - action: keep
#            regex: true
#            source_labels:
#              - __meta_kubernetes_service_annotation_prometheus_io_scrape
#          - action: replace
#            regex: (https?)
#            source_labels:
#              - __meta_kubernetes_service_annotation_prometheus_io_scheme
#            target_label: __scheme__
#          - action: replace
#            regex: (.+)
#            source_labels:
#              - __meta_kubernetes_service_annotation_prometheus_io_path
#            target_label: __metrics_path__
#          - action: replace
#            regex: ([^:]+)(?::\d+)?;(\d+)
#            replacement: $1:$2
#            source_labels:
#              - __address__
#              - __meta_kubernetes_service_annotation_prometheus_io_port
#            target_label: __address__
#          - action: labelmap
#            regex: __meta_kubernetes_service_label_(.+)
#          - action: replace
#            source_labels:
#              - __meta_kubernetes_namespace
#            target_label: kubernetes_namespace
#          - action: replace
#            source_labels:
#              - __meta_kubernetes_service_name
#            target_label: kubernetes_name
#          - action: replace
#            source_labels:
#              - __meta_kubernetes_pod_node_name
#            target_label: kubernetes_node
#      - job_name: kubernetes-service-endpoints-slow
#        kubernetes_sd_configs:
#          - role: endpoints
#        relabel_configs:
#          - action: keep
#            regex: true
#            source_labels:
#              - __meta_kubernetes_service_annotation_prometheus_io_scrape_slow
#          - action: replace
#            regex: (https?)
#            source_labels:
#              - __meta_kubernetes_service_annotation_prometheus_io_scheme
#            target_label: __scheme__
#          - action: replace
#            regex: (.+)
#            source_labels:
#              - __meta_kubernetes_service_annotation_prometheus_io_path
#            target_label: __metrics_path__
#          - action: replace
#            regex: ([^:]+)(?::\d+)?;(\d+)
#            replacement: $1:$2
#            source_labels:
#              - __address__
#              - __meta_kubernetes_service_annotation_prometheus_io_port
#            target_label: __address__
#          - action: labelmap
#            regex: __meta_kubernetes_service_label_(.+)
#          - action: replace
#            source_labels:
#              - __meta_kubernetes_namespace
#            target_label: kubernetes_namespace
#          - action: replace
#            source_labels:
#              - __meta_kubernetes_service_name
#            target_label: kubernetes_name
#          - action: replace
#            source_labels:
#              - __meta_kubernetes_pod_node_name
#            target_label: kubernetes_node
#        scrape_interval: 5m
#        scrape_timeout: 30s
#      - honor_labels: true
#        job_name: prometheus-pushgateway
#        kubernetes_sd_configs:
#          - role: service
#        relabel_configs:
#          - action: keep
#            regex: pushgateway
#            source_labels:
#              - __meta_kubernetes_service_annotation_prometheus_io_probe
#      - job_name: kubernetes-services
#        kubernetes_sd_configs:
#          - role: service
#        metrics_path: /probe
#        params:
#          module:
#            - http_2xx
#        relabel_configs:
#          - action: keep
#            regex: true
#            source_labels:
#              - __meta_kubernetes_service_annotation_prometheus_io_probe
#          - source_labels:
#              - __address__
#            target_label: __param_target
#          - replacement: blackbox
#            target_label: __address__
#          - source_labels:
#              - __param_target
#            target_label: instance
#          - action: labelmap
#            regex: __meta_kubernetes_service_label_(.+)
#          - source_labels:
#              - __meta_kubernetes_namespace
#            target_label: kubernetes_namespace
#          - source_labels:
#              - __meta_kubernetes_service_name
#            target_label: kubernetes_name
#      - job_name: kubernetes-pods
#        kubernetes_sd_configs:
#          - role: pod
#        relabel_configs:
#          - action: keep
#            regex: true
#            source_labels:
#              - __meta_kubernetes_pod_annotation_prometheus_io_scrape
#          - action: replace
#            regex: (.+)
#            source_labels:
#              - __meta_kubernetes_pod_annotation_prometheus_io_path
#            target_label: __metrics_path__
#          - action: replace
#            regex: ([^:]+)(?::\d+)?;(\d+)
#            replacement: $1:$2
#            source_labels:
#              - __address__
#              - __meta_kubernetes_pod_annotation_prometheus_io_port
#            target_label: __address__
#          - action: labelmap
#            regex: __meta_kubernetes_pod_label_(.+)
#          - action: replace
#            source_labels:
#              - __meta_kubernetes_namespace
#            target_label: kubernetes_namespace
#          - action: replace
#            source_labels:
#              - __meta_kubernetes_pod_name
#            target_label: kubernetes_pod_name
#      - job_name: kubernetes-pods-slow
#        kubernetes_sd_configs:
#          - role: pod
#        relabel_configs:
#          - action: keep
#            regex: true
#            source_labels:
#              - __meta_kubernetes_pod_annotation_prometheus_io_scrape_slow
#          - action: replace
#            regex: (.+)
#            source_labels:
#              - __meta_kubernetes_pod_annotation_prometheus_io_path
#            target_label: __metrics_path__
#          - action: replace
#            regex: ([^:]+)(?::\d+)?;(\d+)
#            replacement: $1:$2
#            source_labels:
#              - __address__
#              - __meta_kubernetes_pod_annotation_prometheus_io_port
#            target_label: __address__
#          - action: labelmap
#            regex: __meta_kubernetes_pod_label_(.+)
#          - action: replace
#            source_labels:
#              - __meta_kubernetes_namespace
#            target_label: kubernetes_namespace
#          - action: replace
#            source_labels:
#              - __meta_kubernetes_pod_name
#            target_label: kubernetes_pod_name
#        scrape_interval: 5m
#        scrape_timeout: 30s
#      - job_name: kubernetes-netdata
#        scrape_interval: 10s
#        scrape_timeout: 10s
#        kubernetes_sd_configs:
#          - role: pod
#        metric_relabel_configs:
#          - source_labels: [__name__]
#            regex: 'netdata_(system_cpu|system_load|system_ram|disk_space|system_net|net_net|conntrack_count|netfilter_conntrack_sockets|disk_io_KiB|nginx|nv_|apps_cpu|apps_sockets_open|apps_files_open|apps_processes|apps_threads|apps_vmem|apps_uptime_avg|apps_uptime_seconds|apps_mem|portcheck|cpu_cpu_percentage|redis_operations|redis_uptime|cgroup_mem_usage_MiB|cgroup_mem_MiB|cgroup_cpu_percentage_average|probe_duration|systemd_service_owner|users_processes|fping|system_uptime|users_uptime_seconds|log_count|time_epoch|nvidia|ipv4_tcp|ipv4_sockstat).*'
#            action: keep
#          - source_labels: [family]
#            regex: '.*/(var|run|mnt|etc|tmp|home|dev|shm).*'
#            action: drop
#        relabel_configs:
#          - source_labels: [__meta_kubernetes_namespace]
#            action: replace
#            target_label: namespace
#          - source_labels: [__meta_kubernetes_pod_node_name]
#            action: replace
#            target_label: instance
#          - source_labels: [__meta_kubernetes_pod_name]
#            action: replace
#            target_label: pod
#          - source_labels: [__address__]
#            action: replace
#            regex: ([^:]+)(?::\d+)?
#            replacement: ${1}:19999
#            target_label: __address__
#          - replacement: /api/v1/allmetrics?format=prometheus
#            source_labels: [__metrics_path__]
#            target_label: __metrics_path__
#          - source_labels: [__meta_kubernetes_pod_label_name]
#            action: keep
#            regex: netdata
